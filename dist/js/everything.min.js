var gameLogic;!function(a){function b(){for(var d=[],e=0;e<a.ROWS;e++){d[e]=[];for(var f=0;f<a.COLS;f++)d[e][f]=c()}for(;!o(d);)d=b();return d}function c(){var b=Math.floor(Math.random()*a.num_of_colors+1);switch(b){case 1:return"R";case 2:return"G";case 3:return"B";case 4:return"X"}}function d(){for(var b=[],c=0;c<a.num_of_players;c++)b[c]=0;return b}function e(){var a=b(),c=Math.floor(18*Math.random()+1);return{board:angular.copy(a),delta:null,current_turn:0,scores:d(),initialboard:angular.copy(a),changed_delta:null,random:c%2===0?c-1:c}}function f(b){return b.current_turn>=a.total_turns&&g(b.scores)?!0:!1}function g(a){for(var b=a.join(",")+",",c=0;c<a.length;c++)if(b.replace(a[c]+",","").indexOf(a[c]+",")>-1)return!0;return!1}function h(b){if(f(b))return"";if(b.current_turn==a.total_turns)for(var c=Math.max.apply(null,b.scores),d=0;d<b.scores.length;d++)if(c==b.scores[d])return d+1+"";return""}function i(a,b,c){for(var d=0;d<a.length;d++)if(a[d].row===b&&a[d].col===c)return!0;return!1}function j(b,c){for(var d=0,e=b,f=[],g=[],h=!1,j=!1,n=!1,o=!1,p=1,q=0;q<a.ROWS;q++){g[q]=[];for(var r=0;r<a.COLS;r++)g[q][r]=!1}for(var q=0;q<a.ROWS;q++)for(var s=k(c,q),r=0;r<a.COLS;r++)r>=s.left&&r<=s.right?g[q][r]=!0:g[q][r]=!1;for(var q=0;q<a.COLS;q++)for(var s=l(c,q),r=0;r<a.ROWS;r++)if(r>=s.left&&r<=s.right&&1==g[r][q]){if(!i(c,r,q))switch(b[r][q]){case"R":h=!0;break;case"G":j=!0;break;case"B":n=!0;break;case"X":o=!0}}else g[r][q]=!1;for(var q=0;q<a.ROWS;q++)for(var r=0;r<a.COLS;r++)h===!0&&"R"===b[q][r]?g[q][r]=!0:j===!0&&"G"===b[q][r]?g[q][r]=!0:n===!0&&"B"===b[q][r]?g[q][r]=!0:o===!0&&"X"===b[q][r]&&(g[q][r]=!0),g[q][r]===!0&&(f.push({row:q,col:r}),d++);for(var r=a.COLS-1;r>=0;r--)for(var t=a.ROWS-1,q=a.ROWS-1;q>=0;q--){var u=m(e,g,t,q,r);t=u.flag,e[q][r]=u.color,t--}return d*=1+(1==n?1:0)+(1==j?1:0)+(1==h?1:0)+(1==o?1:0),{score:d*p,board:e,changed_delta:f}}function k(a,b){for(var c=100,d=-2,e=0;e<a.length;e++)a[e].row===b&&(c=Math.min(a[e].col,c),d=Math.max(a[e].col,d));return{left:c,right:d}}function l(a,b){for(var c=100,d=-2,e=0;e<a.length;e++)a[e].col===b&&(c=Math.min(a[e].row,c),d=Math.max(a[e].row,d));return{left:c,right:d}}function m(a,b,d,e,f){for(;d>=0&&b[d][f]!==!1;)d--;return 0>d?{color:c(),flag:d}:{color:a[d][f],flag:d}}function n(c,d,g){c||(c=e());var i=c.board;if(q(i,d),f(c)||""!==h(c))throw new Error("Can only make a move if the game is not over!");var k=angular.copy(i),l=j(k,d);for(k=l.board;!o(k);)k=b();var m=angular.copy(c.scores);m[g]+=l.score;var n=angular.copy(c.initialboard?c.initialboard:c.board);c.initialboard||log.info("wtf2",c);var p,r,s={board:k,delta:d,current_turn:c.current_turn+1,scores:m,initialboard:n,changed_delta:angular.copy(l.changed_delta),random:c.random},t=h(s);return""!==t||f(s)?(r=-1,p="1"===t?[1,0]:"2"===t?[0,1]:[0,0]):(r=a.num_of_players-1-g,p=null),{endMatchScores:p,turnIndexAfterMove:r,stateAfterMove:s}}function o(a){log.info("really? wsgo");for(var b=[],c=0;c<a.length;c++){b[c]=[];for(var d=0;d<a[0].length;d++)b[c][d]=!1}for(var c=0;c<a.length;c++){b[c]=[];for(var d=0;d<a[0].length;d++)if(p(a,c,d,0,b,c,d))return log.info("really? available",a),!0}return log.info("really?",a),!1}function p(a,b,c,d,e,f,g){if(0>b||b>=a.length||0>c||c>=a[0].length||a[b][c]!=a[f][g]||1==e[b][c])return!1;if(d>=2&&a[b][c]==a[f][g]&&Math.abs(f-b)<=1&&Math.abs(g-c)<=1)return!0;e[b][c]=!0;var h=p(a,b+1,c,d+1,e,f,g)||p(a,b-1,c,d+1,e,f,g)||p(a,b+1,c+1,d+1,e,f,g)||p(a,b+1,c-1,d+1,e,f,g)||p(a,b-1,c+1,d+1,e,f,g)||p(a,b-1,c-1,d+1,e,f,g)||p(a,b,c+1,d+1,e,f,g)||p(a,b,c-1,d+1,e,f,g);return e[b][c]=!1,h}function q(a,b){for(var c=0;c<b.length;c++)if(b[c].row<0||b[c].col<0||b[c].row>=8||b[c].col>=6)throw new Error("All moves should be positive");if(b.length<=3)throw new Error("You should draw a circle with at least three points");if(b[0].row!==b[b.length-1].row||b[0].col!==b[b.length-1].col)throw new Error("You should draw a enclosed circle");if(r(b))throw new Error("You should a draw enclosed circle without duplicates");for(var c=1;c<b.length;c++){if(!(Math.abs(b[c].row-b[c-1].row)<=1&&Math.abs(b[c].col-b[c-1].col)<=1))throw new Error("Point selected should be closed to the previous one");if(a[b[c].row][b[c].col]!==a[b[c-1].row][b[c-1].col])throw log.info("after",angular.toJson(a)),new Error("Points should all be the same color")}return!0}function r(b){for(var c=[],d=0;d<b.length-1;d++)c[d]=b[d].row*a.COLS+b[d].col;var e=c.sort();log.info(e);for(var d=0;d<e.length-1;d++)if(e[d]===e[d+1])return!0;return!1}function s(a){var b=a.turnIndexBeforeMove,c=a.stateBeforeMove,d=a.move,e=a.move.stateAfterMove.delta,f=n(c,e,b);if(!angular.equals(d,f))throw new Error("Expected move="+angular.toJson(f,!0)+", but got stateTransition="+angular.toJson(a,!0))}function t(a){}function u(){var b=a.createMove(null,[{row:0,col:0}],0);log.log("move=",b);var c={turnIndexBeforeMove:0,stateBeforeMove:null,move:b,numberOfPlayers:2};a.checkMoveOk(c)}a.ROWS=8,a.COLS=6,a.num_of_players=2,a.total_turns=20,a.num_of_colors=4,a.getInitialState=e,a.createMove=n,a.checkMoveOk=s,a.checkMoveOkNoOp=t,a.forSimpleTestHtml=u}(gameLogic||(gameLogic={}));var game;!function(a){function b(b){translate.setTranslations(c()),translate.setLanguage("en"),log.log("Translation of 'RULES_OF_ENCLOSECOMBAT' is "+translate("RULES_OF_ENCLOSECOMBAT")),resizeGameAreaService.setWidthToHeight(.6818),moveService.setGame({minNumberOfPlayers:2,maxNumberOfPlayers:2,checkMoveOk:gameLogic.checkMoveOkNoOp,updateUI:f});var d=window;d.HTMLInspector&&setInterval(function(){d.HTMLInspector.inspect({excludeRules:["unused-classes","script-placement"]})},3e3),b({method:"GET",url:"http://cs.nyu.edu/~hm1305/smg/score"}).then(function(b){a.record=parseInt(b.data),log.info("finallll",angular.toJson(b.data))},function(b){log.info("finalll",b),a.record=0})}function c(){return{RULES_OF_ENCLOSECOMBAT:{en:"Rules of EncloseCombat",zh:"滑块大战的规则"},ENCLOSECOMBAT_RULES_SLIDE1:{en:"You and your opponent take turns to draw an enclosed shape over the chips of same color. The more the area is, the higher the score will be.",zh:"你和你的对手轮流操作，在相同颜色的卡片上围成一个闭合的形状。然后这个形状上和其内的卡片会消失，上面的会掉下来，新的卡片也会补充进来。"},ENCLOSECOMBAT_RULES_SLIDE2:{en:"If you have chips INSIDE the shape, all the same color chips will be gone with an extra bonus. After 20 turns, player with higher score win.",zh:"如果内部有色块，所有相同颜色的色块都会消失，你也会得到奖励。面积越大，分数越高，二十个回合之后分数高的人获胜。"},CLOSE:{en:"Close",zh:"关闭"},LEFT_TURNS:{en:"Turns left",zh:"剩余回合"},YOUR_SCORE:{en:"Current",zh:"当前分数"},HIGHEST_SCORE:{en:"Record",zh:"记录"},PLAYER:{en:"Player",zh:"玩家"},PLAYER1:{en:"Captain",zh:"美队"},PLAYER2:{en:"Ironman",zh:"钢铁侠"},PLAYER3:{en:"Batman",zh:"蝙蝠侠"},PLAYER4:{en:"Superman",zh:"超人"},PLAYER5:{en:"Deadpool",zh:"死侍"},PLAYER6:{en:"Ladypool",zh:"女死侍"},PLAYER7:{en:"Blade",zh:"刀锋"},PLAYER8:{en:"Deacon",zh:"Deacon"},PLAYER9:{en:"Thor",zh:"索尔"},PLAYER10:{en:"Loki",zh:"洛基"},PLAYER11:{en:"Hulk",zh:"浩克"},PLAYER12:{en:"Black Widow",zh:"黑寡妇"},PLAYER13:{en:"Batman",zh:"蝙蝠侠"},PLAYER14:{en:"Joker",zh:"小丑"},PLAYER15:{en:"Charles",zh:"X"},PLAYER16:{en:"Magneto",zh:"万磁王"},PLAYER17:{en:"Harley Quinn",zh:"哈莉·奎茵"},PLAYER18:{en:"Joker",zh:"小丑"}}}function d(){log.info("Hi"),log.info("Animation ended"),a.animationEnded=!0,a.shouldshowscore=!0,g(),e()}function e(){if(j()){a.didMakeMove=!0;var b=document.getElementById("rline"),c=document.getElementById("gameArea"),d=document.getElementById("scorenotice"),e=c.clientWidth/gameLogic.COLS,f=.9*c.clientHeight/gameLogic.ROWS,g="",h=aiService.findSimplyComputerMove(a.currentUpdateUI.move);h.stateAfterMove.delta.forEach(function(a){var b=a.col*e+e/2,c=a.row*f+f/2;g=g+b+","+c+" "}),a.linesstyle=!0,b.setAttribute("points",g),d.setAttribute("z-index","50"),$timeout(function(){a.linesstyle=!1,b.setAttribute("points",""),moveService.makeMove(h)},1500)}}function f(b){if("passAndPlay"===b.playMode&&void 0!==b.move.stateAfterMove){var c=b.move.stateAfterMove.scores[0]+b.move.stateAfterMove.scores[1];c>parseInt(a.getHighestScore())&&localStorage.setItem("score",c+""),c>a.getHighestScoreGlobally()&&a.$httpt({method:"GET",url:"http://cs.nyu.edu/~hm1305/smg/index.php?NameAndScore="+c}).then(function(b){log.info("finallll",angular.toJson(b)),a.record=c},function(a){log.info("finalll",a)})}log.info("Game got updateUI???:",b),a.animationEnded=!1,a.didMakeMove=!1,a.currentUpdateUI=b;var f=document.getElementById("rline"),h=document.getElementById("gameArea"),i=h.clientWidth/gameLogic.COLS,j=.9*h.clientHeight/gameLogic.ROWS;if(g(),log.info(b.stateBeforeMove),k())a.state=gameLogic.getInitialState(),e();else if(void 0!==b.stateBeforeMove?(a.state=b.stateBeforeMove,a.state.changed_delta=null,a.state={initialboard:b.stateBeforeMove.initialboard,delta:b.stateBeforeMove.delta,current_turn:b.stateBeforeMove.current_turn,scores:b.stateBeforeMove.scores,changed_delta:null,random:b.stateBeforeMove.random,board:b.stateBeforeMove.board}):a.state={initialboard:b.move.stateAfterMove.initialboard?b.move.stateAfterMove.initialboard:b.move.stateAfterMove.board,delta:[],current_turn:0,scores:[0,0],changed_delta:null,random:b.move.stateAfterMove.random,board:b.move.stateAfterMove.initialboard?b.move.stateAfterMove.initialboard:b.move.stateAfterMove.board},n()&&"passAndPlay"!==a.currentUpdateUI.playMode&&"playAgainstTheComputer"!==a.currentUpdateUI.playMode){var l="";a.currentUpdateUI.move.stateAfterMove.delta.forEach(function(a){var b=a.col*i+i/2,c=a.row*j+j/2;l=l+b+","+c+" "}),a.shouldshowscore=!0,$timeout(function(){a.shouldshowscore=!1},1e3),a.linesstyle=!0,f.setAttribute("points",l),$timeout(function(){a.linesstyle=!1,f.setAttribute("points",""),a.state=a.currentUpdateUI.move.stateAfterMove,a.shouldshowscore=!1,a.animationEndedTimeout=$timeout(d,Math.max(1e3,250*A()))},1500)}else $timeout(function(){a.shouldshowscore=!1},1e3),a.state=a.currentUpdateUI.move.stateAfterMove,a.animationEndedTimeout=$timeout(d,Math.max(1e3,250*A()))}function g(){a.animationEndedTimeout&&($timeout.cancel(a.animationEndedTimeout),a.animationEndedTimeout=null)}function h(){return localStorage.getItem("score")?localStorage.getItem("score"):(localStorage.setItem("score","0"),0)}function i(){return a.record}function j(){return n()&&m()}function k(){return!a.currentUpdateUI.move.stateAfterMove}function l(){return a.currentUpdateUI.playMode?"passAndPlay"===a.currentUpdateUI.playMode:!1}function m(){return void 0!==a.currentUpdateUI.playersInfo[a.currentUpdateUI.yourPlayerIndex]&&""===a.currentUpdateUI.playersInfo[a.currentUpdateUI.yourPlayerIndex].playerId}function n(){return!a.didMakeMove&&a.currentUpdateUI.move.turnIndexAfterMove>=0&&a.currentUpdateUI.yourPlayerIndex===a.currentUpdateUI.move.turnIndexAfterMove}function o(b){return a.currentUpdateUI.move.turnIndexAfterMove==b}function p(){return a.didMakeMove}function q(b){log.info("Slided on cell:",angular.toJson(a.moves));document.getElementById("remindlines");if("?throwException"===window.location.search)throw new Error("Throwing the error because URL has '?throwException'");try{var c=gameLogic.createMove(a.state,a.moves,a.currentUpdateUI.move.turnIndexAfterMove);moveService.makeMove(c),a.moves=new Array}catch(d){return log.info(d),void(a.moves=new Array)}}function r(){var b=0,c=0,d=0,e=0,f=0;a.currentUpdateUI.move.stateAfterMove&&(e=a.currentUpdateUI.move.stateAfterMove.scores[0],f=a.currentUpdateUI.move.stateAfterMove.scores[1],b=e+f);var g=0;a.currentUpdateUI.stateBeforeMove&&(c=a.currentUpdateUI.stateBeforeMove.scores[0],d=a.currentUpdateUI.stateBeforeMove.scores[1],g=c+d);var h=!1;return e-c>0?(h=0===a.currentUpdateUI.yourPlayerIndex,log.info("scoreby0",a.currentUpdateUI.yourPlayerIndex)):f-d>0&&(h=1===a.currentUpdateUI.yourPlayerIndex,log.info("scoreby1",a.currentUpdateUI.yourPlayerIndex)),{score:b-g,color:h?"blue":"red"}}function s(){return!a.animationEnded&&0!==r().score}function t(a,b){return!0}function u(b,c){return"R"===a.state.board[b][c]}function v(b,c){return"G"===a.state.board[b][c]}function w(b,c){return"B"===a.state.board[b][c]}function x(b,c){return"X"===a.state.board[b][c]}function y(){return a.state.random?"PLAYER"+a.state.random:"PLAYER"}function z(){if(a.state.random){var b=a.state.random+1;return"PLAYER"+b}return"PLAYER"}function A(){var b=[0,0,0,0,0,0],c=0;if(a.currentUpdateUI.move.stateAfterMove.changed_delta)for(var d=0;d<a.currentUpdateUI.move.stateAfterMove.changed_delta.length;d++)b[a.currentUpdateUI.move.stateAfterMove.changed_delta[d].col]++,c=Math.max(c,b[a.currentUpdateUI.move.stateAfterMove.changed_delta[d].col]);return c}function B(b,c){var d=0;if(a.state.changed_delta)for(var e=0;e<a.state.changed_delta.length;e++)a.state.changed_delta[e].row>=b&&a.state.changed_delta[e].col===c&&d++;return log.info("test it out",a.animationEnded,b,c,d,a.state.changed_delta),0!==d&&!a.animationEnded&&a.state.changed_delta?"movedown"+d:""}function C(b){return b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.isHelpModalShown=!1),!0}a.currentUpdateUI=null,a.animationEnded=!1,a.didMakeMove=!1,a.state=null,a.isHelpModalShown=!1,a.moves=new Array,a.msg="",a.animationEndedTimeout=null,a.ismyscore=0,a.shouldshowscore=!0,a.linesstyle=!1,a.init=b,a.getHighestScore=h,a.getHighestScoreGlobally=i,a.isComputerTurn=j,a.isPassAndPlay=l,a.isComputer=m,a.isMyTurn=n,a.isCurrentPlayerIndex=o,a.animationEndedorNot=p,a.cellPressedUp=q,a.getScores=r,a.shouldShowScore=s,a.shouldShowImage=t,a.isPieceR=u,a.isPieceG=v,a.isPieceB=w,a.isPieceX=x,a.getName=y,a.getOppoName=z,a.getMostMoveDownNum=A,a.getMoveDownClass=B,a.clickedOnModal=C}(game||(game={})),angular.module("myApp",["ngTouch","ui.bootstrap","gameServices"]).run(["$http",function(a){"use strict";function b(b,d,o){var p,q,r=g.offsetTop+.1*g.clientHeight,s=.9*g.clientHeight,t=d-g.offsetLeft,u=o-r;if(0>t||0>u||t>=g.clientWidth||u>=s){if(!m)return h.style.display="none",void h.offsetHeight}else{q=Math.floor(l*t/g.clientWidth),p=Math.floor(k*u/s);var v=s/2/k*(2*p+1),w=g.clientWidth/2/l*(2*q+1),x=Math.sqrt((t-w)*(t-w)+(u-v)*(u-v))/(s/2/k);if(0!==game.moves.length){var y=e(game.moves[game.moves.length-1].row,game.moves[game.moves.length-1].col);j.setAttribute("x1",y.x+""),j.setAttribute("y1",y.y+""),j.setAttribute("x2",t+""),j.setAttribute("y2",u+"")}if(x>.8)return void(("touchend"===b||"touchcancel"===b||"touchleave"===b)&&(game.moves=new Array,i.setAttribute("points",""),h.style.display="none",h.style.webkitTransform="scale(1)",h.offsetHeight));if("touchstart"!==b||n||(n={row:p,col:q},m=document.getElementById("e2e_test_div_"+n.row+"x"+n.col)),!m)return;if(game.isMyTurn()&&"touchend"===b){if(game.moves[game.moves.length-1].row!==p||game.moves[game.moves.length-1].col!==q){var z=game.isPieceR(p,q)?document.getElementById("e2e_test_pieceR_"+p+"x"+q):game.isPieceG(p,q)?document.getElementById("e2e_test_pieceG_"+p+"x"+q):game.isPieceB(p,q)?document.getElementById("e2e_test_pieceB_"+p+"x"+q):document.getElementById("e2e_test_pieceX_"+p+"x"+q);m=document.getElementById("e2e_test_div_"+p+"x"+q),game.moves.push({row:p,col:q})}log.info(angular.toJson(game.moves)),f(a)}else if((0===game.moves.length||(game.moves[game.moves.length-1].row!==p||game.moves[game.moves.length-1].col!==q)&&Math.abs(game.moves[game.moves.length-1].row-p)<=1&&Math.abs(game.moves[game.moves.length-1].col-q)<=1)&&(game.moves.length<2||2===game.moves.length&&(game.moves[0].row!==p||game.moves[0].col!==q)||game.moves.length>2&&!c(game.moves,p,q))&&!(game.moves.length>=3&&game.moves[game.moves.length-1].row===game.moves[0].row&&game.moves[game.moves.length-1].col===game.moves[0].col)){var z=game.isPieceR(p,q)?document.getElementById("e2e_test_pieceR_"+p+"x"+q):game.isPieceG(p,q)?document.getElementById("e2e_test_pieceG_"+p+"x"+q):game.isPieceB(p,q)?document.getElementById("e2e_test_pieceB_"+p+"x"+q):document.getElementById("e2e_test_pieceX_"+p+"x"+q);if(z.setAttribute("r","42%"),$timeout(function(){z.setAttribute("r","35%")},150),m=document.getElementById("e2e_test_div_"+p+"x"+q),log.info("animationwhat",game.isComputerTurn()),game.isMyTurn()){game.moves.push({row:p,col:q}),h.style.display="block","touchstart"===b&&(j.setAttribute("x1","0"),j.setAttribute("y1","0"),j.setAttribute("x2","0"),j.setAttribute("y2","0"));var A=e(p,q);if(1==game.moves.length)i.setAttribute("points",A.x+","+A.y+" ");else{var B=i.getAttribute("points");i.setAttribute("points",B+A.x+","+A.y+" ")}}else i.setAttribute("points","")}}game.didMakeMove||"touchend"!==b&&"touchcancel"!==b&&"touchleave"!==b||(n=null,m=null,h.style.display="none",h.offsetHeight,h.style.webkitTransform="scale(1)",game.moves=new Array)}function c(a,b,c){for(var d=1;d<a.length;d++)if(a[d].row===b&&a[d].col===c)return!0;return!1}function d(){return{width:g.clientWidth/l,height:.9*g.clientHeight/k}}function e(a,b){var c=d();return{x:b*c.width+c.width/2,y:a*c.height+c.height/2}}function f(a){$rootScope.$apply(function(){game.cellPressedUp(a)})}var g=document.getElementById("gameArea"),h=document.getElementById("draggingLines"),i=document.getElementById("pline"),j=document.getElementById("pline2");game.$httpt=a,dragAndDropService.addDragListener("gameArea",b);var k=gameLogic.ROWS,l=gameLogic.COLS,m=null,n=null;$rootScope.game=game,game.init(a),resizeGameAreaService.setWidthToHeight(.6818)}]);var aiService;!function(a){function b(a){for(var b=null,c=1;c<gameLogic.ROWS-1;c++)for(var d=1;d<gameLogic.COLS-1;d++){var e=new Array;try{return e.push({row:c-1,col:d}),e.push({row:c,col:d+1}),e.push({row:c+1,col:d}),e.push({row:c,col:d-1}),e.push({row:c-1,col:d}),b=gameLogic.createMove(a.stateAfterMove,e,a.turnIndexAfterMove)}catch(f){}}for(var c=0;c<gameLogic.ROWS;c++)for(var d=1;d<gameLogic.COLS;d++)for(var g=0;3>=g;g++)try{var e=new Array;switch(e.push({row:c,col:d-1}),e.push({row:c,col:d}),g){case 0:e.push({row:c-1,col:d-1});break;case 1:e.push({row:c-1,col:d});break;case 2:e.push({row:c+1,col:d});break;case 3:e.push({row:c+1,col:d-1})}return e.push({row:c,col:d-1}),b=gameLogic.createMove(a.stateAfterMove,e,a.turnIndexAfterMove)}catch(f){}return b}function c(a){for(var b=null,c=0,e=new Array,f=new Array,g=new Array,h=0;h<gameLogic.ROWS;h++){f[h]=new Array;for(var i=0;i<gameLogic.COLS;i++)f[h][i]=!1}log.info("rrr");try{for(var h=0;h<gameLogic.ROWS;h++)for(var i=0;i<gameLogic.COLS;i++){var j=d(a.stateAfterMove.board,h,i,"",g,f);j.len>c&&(e=j.moves)}b=gameLogic.createMove(a.stateAfterMove,e,a.turnIndexAfterMove)}catch(k){log.info(k)}return b}function d(a,b,c,e,f,g){if(0>b||b>gameLogic.ROWS||0>c||c>gameLogic.COLS||""!==e&&a[b][c]!==e)return{len:0,moves:null};if(""!==e&&null!==f&&f.length>=3&&g[b][c]===!0&&b===f[0].row&&c===f[0].col)return f.push({row:b,col:c}),{len:f.length-1,moves:f};""===e&&(e=a[b][c]),g[b][c]=!0,f.push({row:b,col:c});var h=new Array;b+1<gameLogic.ROWS&&a[b+1][c]===e&&h.push(d(a,b+1,c,e,f,g)),b+1<gameLogic.ROWS&&c+1<gameLogic.COLS&&a[b+1][c+1]===e&&h.push(d(a,b+1,c+1,e,f,g)),b+1<gameLogic.ROWS&&c-1>0&&a[b+1][c-1]===e&&h.push(d(a,b+1,c-1,e,f,g)),c+1<gameLogic.COLS&&a[b][c+1]===e&&h.push(d(a,b,c+1,e,f,g)),c-1>0&&a[b][c-1]===e&&h.push(d(a,b,c-1,e,f,g)),b-1>0&&c-1>0&&a[b-1][c-1]===e&&h.push(d(a,b-1,c-1,e,f,g)),b-1>0&&a[b-1][c]===e&&h.push(d(a,b-1,c,e,f,g)),b-1>0&&c+1<gameLogic.COLS&&a[b-1][c+1]===e&&h.push(d(a,b-1,c+1,e,f,g)),f.pop(),g[b][c]=!1;for(var i=0,j=new Array,k=0;k<h.length;k++)h[k].len>i&&(i=h[k].len,j=h[k].moves);return{len:i,moves:j}}function e(a){return g(a,{millisecondsLimit:1e3})}function f(a,b){for(var c=[],d=0;d<gameLogic.ROWS;d++)for(var e=0;e<gameLogic.COLS;e++)try{}catch(f){}return c}function g(a,b){return alphaBetaService.alphaBetaDecision(a,a.turnIndexAfterMove,i,h,null,b)}function h(a,b){var c=a.endMatchScores;return c?c[0]>c[1]?Number.POSITIVE_INFINITY:c[0]<c[1]?Number.NEGATIVE_INFINITY:0:0}function i(a,b){return f(a.stateAfterMove,b)}a.findSimplyComputerMove=b,a.findCleverComputerMove=c,a.findComputerMove=e,a.getPossibleMoves=f,a.createComputerMove=g}(aiService||(aiService={}));
//# sourceMappingURL=everything.min.js.map